Формула выглядит так:
$$|A \cup B| = |A| + |B| - |A \cap B|$$
Чтобы найти количество элементов в объединении двух множеств, нужно из суммы элементов в каждом множестве вычесть количество элементов в их пересечении. Потому что если мы просто сложим количество элементов, которые есть в двух множествах отдельно, мы посчитаем те элементы, что есть и в первом, и во втором множестве, дважды:
![[discrete-6-1.png]]
И чтобы это учесть, мы вычитаем те элементы, что считаем дважды - элементы на пересечении.

Формула включений-исключений работает и для сразу нескольких множеств:
$$\array{|A \cup B \cup C| = |(A \cup B) \cup C| = |A \cup B| + |C| - |(A \cup B) \cap C| \\ |A \cup B| = |A| + |B| - |A \cap B| \\ |(A \cup B) \cap C| = |(A \cap C) \cup (B \cap C)| = \\ =|A \cap C| + |B\cap C| - |A \cap B \cap C|}$$
Итого:
$$\array{|A \cup B \cup C| = |A| + |B| + |C| - \ \\ \ - |A \cap B| - |A\cap C| - |B \cap C| + |A \cap B \cap C|}$$
Для $n$-ного количества множеств, формула раскрывается включением мощностей всех множеств, исключением мощностей пересечения всех пар, включением всех пересечений трех множеств, исключением пересечений четверок и т.д:
$$\biggl|\bigcup _{i=1}^{n}A_{i}{\biggl |}=\sum^n _{i}|A_{i}|-\sum^n _{i<j}|A_{i}\cap A_{j}|+\sum^n _{i<j<k}|A_{i}\cap A_{j}\cap A_{k}|-\ $$
$$\ - \ldots +(-1)^{n-1}|A_{1}\cap A_{2}\cap \ldots \cap A_{n}|$$
Докажем эту формулу показав, что каждый элемент, входящий в объединение всех множеств $\bigcup_{i=1}^n A_i$, учитывается в правой части формулы только один раз.

Возьмем элемент $x$, который входит только в $m$ множеств - без потери общности перенумеруем эти множества так, что они будут первыми. Тогда 
$$\cases{x \in A_i, i \in \overline{1, m} \\ x \notin A_i, i \in \overline{m+1, n}}$$
Начнем считать вхождения:
- В первой сумме элемент посчитается $m = C^1_m$ раз, для каждого из множеств с $A_1$ по $A_m$. $C^k_m$ - число [сочетаний][[[3,0,15]]] $k$ элементов из $m$-элементного множества.
- Во второй сумме элемент посчитается $C^2_m$ раз - количество пар с множествами $A_1, \ldots, A_m$.
- ...
- В $m$-той сумме элемент будет посчитан лишь $1=C^m_m$ раз, в множестве $A_1 \cap \ldots \cap A_m$.
- В суммах с $m+1$ множествами элемент уже учитываться не будет.

Итого, элемент был посчитан $C^1_m - C^2_m + \ldots + (-1)^{m+1}C^m_m$ раз - а это выражение равно единице. Показать это мы можем, раскрыв следующий [бином Ньютона][[[3,0,16]]]:
$$(1+(-1))^m = \sum_{k=0}^m C^k_m 1^{m-k}(-1)^k$$
В левой части ноль: $(1+(-1))^m = (1-1)^m = 0^m = 0$.

В правой части мы можем избавиться от $1^{m-k} = 1$. Получается:
$$0 = \sum_{k=0}^m (-1)^k C^k_m = C^0_m - C^1_m + \ldots + (-1)^mC^m_m$$
Т.к. $C^0_m = 1$, то перенеся этот член влево и умножив на $-1$ (именно поэтому $(-1)^m$ меняется на $(-1)^m \cdot (-1) = (-1)^{m+1}$), получаем:
$$1 = C^1_m - C^2_m + \ldots + (-1)^{m+1}C^m_m$$
Таким образом мы показали, что наш произвольный элемент $x \in \bigcup_i^n A_i$ считается в правой части выражения лишь один раз, а значит для каждого элемента этого множества *суммарно* справа будет именно мощность этого объединения.
