Упорядоченное разбиение $n$-элементного множества на $k$ множеств так, что в первом множестве $n_1$ элементов, во втором $n_2$ элементов, ..., в $k$-том множестве $n_k$ элементов (ну и конечно $\sum\limits_{i=1}^k n_i = n$), считается по формуле:
$$P(n_1,n_2,\ldots,n_k) = \frac{n!}{n_1!n_2!\ldots n_k!} = C_n^{n_1} \cdot C_{n-n_1}^{n_2} \cdot \ldots \cdot C^{n_k}_{n - n_1 - \ldots - n_{k-1}}$$
Смысл за этой формулой схож с обычной формулой сочетаний. Сначала мы выбираем из всего множество варианты взять первое множество с $n_1$ элементами, потом из оставшихся элементов выбираем второе множество, и т.д.

Если расписать произведение сочетаний, видно, как каждый факториал в знаменателе левого сочетания сокращается с числителем правого:
$$= \frac{n!}{n_1!(n-n_1)!} \cdot \frac{(n-n_1)!}{n_2!(n-n_1-n_2)!} \cdot \ldots \cdot \frac{(n-n_1-\ldots-n_k)!}{n_k!\cdot 0!}$$

Обращаю внимание, что здесь упорядоченные именно сами разбиения - внутри этих разбиений порядок элементов не имеет значения (как в сочетаниях!), то есть эти разбиения считаются типа "ямами", в которые мы скидываем элементы оригинального множества.
## Пример задачи
Сколько способов разложить 9 нумерованных шаров в три коробки, первая из которых вмещает 2 шара, вторая - 3 шара и третья - 4 шара?
$$P(2,3,4) = \frac{9!}{2!\cdot 3! \cdot 4!} = 1260$$