Сочетания - набор из $k$ элементов, выбранных из $n$-элементного множества, где не учитывается порядок элементов. Альтернативно можно представить, что эти $k$ элементов идентичны и не различимы.

Сочетания очень схожи с размещениями - единственное отличие это неучитывание порядка (идентичность элементов сочетания). По причинам, описанным в прошлом билете, чтобы учесть многократный подсчет одинаковых размещений, нужно поделить на количество повторяющихся элементов. Таким образом число сочетаний $k$ элементов из $n$-элементного множества будет равно:
$$C^k_n = \frac{A^k_n}{P_k} = \frac{\frac{n!}{(n-k)!}}{k!} = \frac{n!}{k!(n-k)!}$$
Число сочетаний так же совпадают с биномиальным коэффициентом, о котором поговорим в следующем билете:
$$\binom nk = C_n^k$$
Число перестановок $k$ из $n$ находится на пересечении $k$-той диагонали и $n$-ной строки треугольника Паскаля:
![[https://upload.wikimedia.org/wikipedia/commons/4/49/Треугольник_Паскаля.svg]]

С сочетаниями с повторениями все сложнее - для каждой вариации повторений нужно делить на отдельный факториал. Однако мы можем переформулировать задачу подсчета количества сочетаний с повторениями, чтобы прийти к более простому ответу:
$$\bar C ^k_n = C^k_{(n)} = \left(\!\!{\binom {n}{k}}\!\!\right) = \binom {n+k+1}k= \frac{(n+k+1)!}{k!(n-1)!}$$
Такую формулу доказывает [метод шаров и перегородок](https://ru.wikipedia.org/wiki/Метод_шаров_и_перегородок). Задачу подсчета сочетаний с повторением можно свести к задаче расстановки перегородок между шарами. Возьмем $k$ шаров (желаемые объекты для расстановок) и $n-1$ перегородку. Тогда, расставляя все перегородки вместе с шарами, получится $n$ групп с шарами. Для $k=5$ и $n=3$ получаем три группы:
$$\circ \circ | \circ \circ \ | \circ \ $$
Такое сочетание мы можем приравнять к сочетанию с повторениями пяти элементов из множества $\set{A,B,C}$:
$$\set{A, A, B, B, C}$$
Все шары, идущие до первой перегородки, отвечают за первый элемент множества. Следующие шары до второй перегородки отвечают за второй элемент множества, и т.д.

Перегородки не обязательно должны разделять шары: например, для $k=3$ и $n=6$, можем получить (это лишь одно из возможных сочетаний!):
$$\circ \ ||\circ \circ \ |||$$
Такое сочетание можно приравнять к сочетанию из множества $\set{A,B,C,D,E,F}$ 3 элементов:
$$\set{A, C, C}$$
Таким образом, число сочетаний с повторениями сводится к число сочетаний перегородок среди всех позиций (перегородки + шары). Если шаров - $k$, а перегородок - $n-1$, то всего позиций будет $k+n-1$. Количество сочетаний:
$$\bar C^k_n = C^k_{n+k-1}= \frac{(n+k-1)!}{k!(n-1)!}$$
## Примеры задач

> Сколькими способами можно распределить 3 автомата по физике 10 студентам?

Автоматы между собой ничем не различаются, поэтому здесь обычная формула сочетаний без перестановок:
$$C^3_{10} = \frac{10!}{3!(10-3)!} = \frac{10!}{3!7!} = \frac{10\cdot9\cdot8}{3\cdot2\cdot1} = 120$$

> Сколькими способами можно сложить в корзину 5 фруктов 3 видов (яблоки, груши, апельсины)?

Здесь применяем формулу сочетаний с повторениями - внутри корзины фрукты не упорядочены.
$$\bar C_{3}^5 = C^5_{5+3-1} = C^5_7 = \frac{7!}{5!(7-5)!} = \frac{7!}{5!2!} = \frac{7\cdot6}{2\cdot1} = 21$$
