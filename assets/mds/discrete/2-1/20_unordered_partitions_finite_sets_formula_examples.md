Неупорядоченное разбиение $n$-элементного множества в $m_1$ подмножеств из одного элемента, $\ldots$, $m_n$ подмножеств $n$ элементов, ***причем порядок элементов внутри множеств роли не играет***, считается по формуле:
$$N(n_1, n_2, \ldots, n_k) = \frac{n!}{(1!)^{m_1} (2!)^{m_2} \ldots (n!)^{m_n} \cdot m_1! m_2!\ldots m_n!}$$
Причем $n$ должно быть связано равенством:
$$n = 1m_1 + 2m_2 + \ldots nm_n = \sum_{i=1}^n im_i$$
В отличие от упорядоченных разбиений, здесь (например) разбиения $\set{A, B}$ и $\set{B,A}$ считаются равными - отсюда и получается формула. По своей форме, формула для $N$ напоминает формулу количества упорядоченных разбиений $P$, но добавляются факториалы по $m_i$. Каждый из этих факториалов учитывает возможные перестановки множеств из $m_i$ элементов между собой. Так как в неупорядоченном разбиении их порядок не имеет значения, мы уменьшаем количество возможных перестановок путем деления на этот факториал.

Число Стирлинга второго рода $S(n,k)$ представляет количество неупорядоченных разбиений множества $n$ элементов на $k$ множеств - то есть без указания количества элементов в каждом множестве.
$$S(n,k) = \frac1{k!}\sum_{j=0}^{k}(-1)^{k+j} \binom kj j^n$$
Есть и способ задать числа Стирлинга второго рода рекуррентно:
$$\array{S(n,n) = 1,& n \geq 0 \\ S(n, 0) = 0, & n>0 \\ S(n,k)=S(n-1,  k-1) + k\cdot S(n-1, k), & 0 < k \leq n}$$
Еще большее обобщение - число неупорядоченных разбиений множества $n$ элементов (на непустые множества) зовется числом Белла $B_n$. Его тоже можно записать рекуррентно:
$$B_{n+1} = \sum_{k=0}^n \binom nk B_n$$
Или же можно выразить число Белла из чисел Стирлинга. Если каждое число Стирлинга подразумевает разбиение на $k$ множеств, то суммируя их по каждому количеству $k$, мы получим *вообще все* разбиения:
$$B_n = \sum_{k=0}^n S(n,k)$$

## Пример задачи
Сколько способов разделить 20 человек на 4 тройки, 3 пары и двух людей оставить по одному?
$$N(2, 3, 4) = \frac{20!}{(1!)^2 (2!)^3 (3!)^4 \cdot 2!3!4!} = \frac{20!}{(2!)^4 (3!)^54!}$$
