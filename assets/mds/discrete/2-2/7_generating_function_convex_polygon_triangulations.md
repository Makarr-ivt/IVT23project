Задача звучит так: дан выпуклый $n$-угольник. Сколько есть способов разбить его на треугольники диагоналями, которые не будут пересекаться?

Обозначим это количество за $u_n$. Посмотрим, как связано это число рекурсивно, представив многоугольник с вершинами $A_1, \ldots A_n$.


Рассмотрим треугольник с вершинами $A_1, A_2$ и произвольной $A_k (3 \leq k \leq n$). Этот треугольник отрезает из главного многоугольника два меньших:
- С вершинами $A_2$ и $A_3, \ldots, A_k$ - итого $k-1$ вершин.
- С вершинами $A_1$ и $A_{k}, \ldots, A_{n}$ - итого $n-k+2$ вершин.

![[https://neerc.ifmo.ru/wiki/images/6/60/Vectorpaint.png]]

Получается для такой диагонали число разбиений определяется произведением числа разбиений этих меньших многоугольников. Но мы можем выбрать любую вершину $A_k$, а потому число разбиений многоугольника - сумма произведений:
$$u_n = \sum_{k=3}^{n} u_{k-1} \cdot u_{n-k+2}$$
Откуда следует
$$u_{n+3} = \sum_{k=1}^{n+1} u_{k+1} \cdot u_{n-k+3}$$
Причем по определению положем, что у двухугольника есть только одно разбиение: $u_2 = 1$. Проводим замену $V_n = u_{n+2}$, $V_0 = 1$ и получим запись
$$V_{n+1} = \sum_{k=0}^n V_k \cdot V_{n-k}$$
Числа $V_n$ представляют собой [числа Каталана](https://ru.wikipedia.org/wiki/Числа_Каталана). Дальше следует нахождение производящей функции для этих чисел:
$$V(x) = \sum_{n=0}^\infty V_n x^n = V_0 + \sum_{n=1}^\infty V_nx^n = V(x) = 1 + \sum_{n=1}^\infty V_nx^n$$
По формуле [свертки произведения][[[3,1,4]]] производящих функций:
$$V^2(x) = V(x) \cdot V(x) = \sum_{n=0}^\infty \left(\sum_{k=0}^n V_kV_{n-k} \right) x^n = \sum_{n=0}^\infty V_{n+1} x^n$$
Домножая обе стороны на $x$, получаем:
$$xV^2(x) = \sum_{n=0}^\infty V_{n+1}x^{n+1} = \sum_{n=1}^\infty V_nx^n$$
Подставляя в формулу производящей функции получаем уравнение:
$$V(x) = 1 + xV^2(x)$$
А дальше находим корни квадратного уравнения:
$$xV^2(x) - V(x) + 1 = 0 \Rightarrow V(x) = \frac{1 \pm \sqrt{1-4x}}{2x}$$
Причем из двух вариантов мы выбираем вариант с минусом, ибо если взять $V(x) = \frac{1+\sqrt{1-4x}}{2x}$, получаются бесконечные коэффициенты при разложении в ряд.

Тогда мы берем $V(x) = \frac{1-\sqrt{1-4x}}{2x}$, и находя коэффициенты $V_n$, получаем
$$V_n = \binom{2n}n\frac{1}{n+1}$$
Производя обратную замену $V_{n} = u_{n+2}$, получаем количество разбиений $n$-угольника:
$$u_{n+2} = \binom{2n}n\frac{1}{n+1}$$

